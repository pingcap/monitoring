groups:
- name: tikv_accelerate
  rules:
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_grpc_msg_duration_seconds:p99:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 4
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.99, sum(rate(tikv_grpc_msg_duration_seconds_bucket{instance=~".*",
        type!="kv_gc"}[1m])) by (le, type))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 5
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_event_duration_bucket:p99:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 6
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.99, sum(rate(tikv_raftstore_event_duration_bucket{instance=~".*"}[1m]))
        by (le, type))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 7
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_thread_cpu_seconds:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 8
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: sum(rate(tikv_thread_cpu_seconds_total{instance=~".*"}[1m])) by (instance)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 9
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_append_log_duration_seconds:p99:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 10
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.99, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{instance=~".*"}[1m]))
        by (le, instance))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 11
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_raft_process_duration_secs:p99:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 12
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.99, sum(rate(tikv_raftstore_raft_process_duration_secs_bucket{instance=~".*",
        type='ready'}[1m])) by (le, instance))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 13
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_request_wait_time_duration_secs:byins:p99:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 14
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.99, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{instance=~".*"}[1m]))
        by (le, instance))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 15
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_append_log_duration_seconds:p95:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 16
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.95, sum(rate(tikv_raftstore_append_log_duration_seconds_bucket{instance=~".*"}[1m]))
        by (le))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 17
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_apply_wait_time_duration_secs:byins:p99:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 18
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_wait_time_duration_secs_bucket{instance=~".*"}[1m]))
        by (le, instance))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 19
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_apply_log_duration_seconds:p99:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 20
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_log_duration_seconds_bucket{instance=~".*"}[1m]))
        by (le, instance))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 21
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_request_wait_time_duration_secs:p99:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 22
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.99, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{instance=~".*"}[1m]))
        by (le))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 23
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_request_wait_time_duration_secs:p95:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 24
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.95, sum(rate(tikv_raftstore_request_wait_time_duration_secs_bucket{instance=~".*"}[1m]))
        by (le))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 25
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_worker_handled_task:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 26
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: sum(rate(tikv_worker_handled_task_total{instance=~".*"}[1m])) by (name)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 27
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_engine_num_files_at_level:kv:avg
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 28
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: avg(tikv_engine_num_files_at_level{instance=~".*", db="kv"}) by (cf,
        level)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 29
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_engine_num_files_at_level:raft:avg
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 30
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: avg(tikv_engine_num_files_at_level{instance=~".*", db="raft"}) by (cf,
        level)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 31
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_pd_request_duration_seconds:avg:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 32
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: sum(rate(tikv_pd_request_duration_seconds_sum{instance=~".*"}[1m])) by
        (type) / sum(rate(tikv_pd_request_duration_seconds_count{instance=~".*"}[1m]))
        by (type)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 33
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_coprocessor_request_wait_seconds:p95:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 34
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.95, sum(rate(tikv_coprocessor_request_wait_seconds_bucket{instance=~".*",
        type="all"}[1m])) by (le, instance,req))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 35
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_grpc_msg_duration_seconds:avg:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 36
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: sum(rate(tikv_grpc_msg_duration_seconds_sum{instance=~".*"}[1m])) by
        (type) / sum(rate(tikv_grpc_msg_duration_seconds_count[1m])) by (type)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 37
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_apply_wait_time_duration_secs:p99:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 38
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.99, sum(rate(tikv_raftstore_apply_wait_time_duration_secs_bucket{instance=~".*"}[1m]))
        by (le))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 39
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_apply_wait_time_duration_secs:p95:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 40
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.95, sum(rate(tikv_raftstore_apply_wait_time_duration_secs_bucket{instance=~".*"}[1m]))
        by (le))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 41
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_grpc_msg_duration_seconds:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 42
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: sum(rate(tikv_grpc_msg_duration_seconds_count{instance=~".*", type!="kv_gc"}[1m]))
        by (instance,type)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 43
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_raftstore_snapshot_duration_seconds:p99:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 44
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: histogram_quantile(0.99, sum(rate(tikv_raftstore_snapshot_duration_seconds_bucket{instance=~".*",
        type="apply"}[1m])) by (le))
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 45
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_worker_pending_task:sum
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 46
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: sum(tikv_worker_pending_task_total{instance=~".*"}) by (name)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 47
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_coprocessor_request_duration_seconds:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 48
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: sum(rate(tikv_coprocessor_request_duration_seconds_bucket{instance=~".*"}[1m]))
        by (le)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 49
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_futurepool_pending_task:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 50
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: sum(avg_over_time(tikv_futurepool_pending_task_total{instance=~".*"}[1m]))
        by (name)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 51
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_storage_engine_async_request:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 52
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: sum(rate(tikv_storage_engine_async_request_total{instance=~".*", status!~"all|success"}[1m]))
        by (status)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 53
      column: 13
  - record:
      kind: 8
      style: 0
      tag: '!!str'
      value: tikv_thread_cpu_seconds_nogrpc:1m
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 54
      column: 15
    expr:
      kind: 8
      style: 0
      tag: '!!str'
      value: sum(rate(tikv_thread_cpu_seconds_total{instance=~".*", name=~"grpc.*"}[1m]))
        by (instance)
      anchor: ""
      alias: null
      content: []
      headcomment: ""
      linecomment: ""
      footcomment: ""
      line: 55
      column: 13
